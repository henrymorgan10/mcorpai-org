

<!-- === Scam-Compound Risk (vanilla HTML only, no self-hosted JSON, no server) ===
Paste near the end of <body>. Uses only Wikipedia’s public API from the browser.
-->

<section id="scam-panel" aria-label="Real-time Scam-Compound Risk" style="max-width:980px;margin:18px auto;padding:14px;border-radius:14px;border:1px solid rgba(0,0,0,.08);background:rgba(232,255,241,.58);backdrop-filter:saturate(1.05) blur(6px);-webkit-backdrop-filter:saturate(1.05) blur(6px);box-shadow:0 10px 26px rgba(2,6,23,.06);">
  <h3 style="margin:0 0 6px;font-size:1rem;font-weight:700;color:#111">
    Real-time Scam-Compound Risk <span style="font-weight:600;color:#6b7280">(click “실시간 현황” to update)</span>
  </h3>
  <p style="margin:0 0 10px;font-size:.84rem;color:#6b7280">
    A concise indicator based on open-source mentions in Wikipedia search. This is not a verification or legal finding.
  </p>

  <div style="display:flex;gap:8px;align-items:center;justify-content:flex-start;margin:6px 0 8px">
    <button id="scam-btn" type="button" style="font-size:.8rem;font-weight:700;border:1px solid rgba(0,0,0,.18);background:#fff;box-shadow:0 2px 6px rgba(2,6,23,.06);padding:6px 10px;border-radius:8px;cursor:pointer">
      실시간 현황
    </button>
    <span id="scam-status" style="font-size:.8rem;color:#6b7280"></span>
  </div>

  <div role="status" aria-live="polite" style="text-align:center;font-size:.86rem;color:#111;letter-spacing:.08px;margin:6px 0 2px">
    <span style="font-weight:700;margin-right:6px">Scam-Compound Index:</span>
    <span id="scam-line">Loading…</span>
  </div>
</section>

<style>
  #scam-panel .country{color:#111;font-weight:600}
  #scam-panel .risk-high{color:#ef4444;font-weight:700}
  #scam-panel .risk-med{color:#f59e0b;font-weight:700}
  #scam-panel .risk-low{color:#10b981;font-weight:700}
  #scam-panel .pulse{animation:pulse-bg .26s linear 1}
  @keyframes pulse-bg{from{background-color:rgba(255,255,0,.12)}to{background-color:transparent}}
</style>

<script>
(function(){
  const line   = document.getElementById('scam-line');
  const btn    = document.getElementById('scam-btn');
  const status = document.getElementById('scam-status');
  if(!line) return;

  // 1. 표시 단어와 색상 클래스입니다.
  function word(r){
    r = String(r||'HIGH').toUpperCase();
    if(r==='HIGH') return {w:'High', cls:'risk-high'};
    if(r==='LOW')  return {w:'Low',  cls:'risk-low'};
    return {w:'Medium', cls:'risk-med'};
  }
  const esc = s => String(s||'').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c]));

  // 2. 기본값입니다. 질문 요청대로 즉시 High/Medium/Low로 고정 표기합니다.
  const BASELINE = [
    {country:'Laos',        risk:'HIGH',  city:'Golden Triangle SEZ',  pattern:'Coerced cyberfraud / movement restriction', last:'2025-07-20'},
    {country:'Myanmar',     risk:'HIGH',  city:'Myawaddy SEZ',         pattern:'Human trafficking / fenced compounds',       last:'2025-07-29'},
    {country:'Thailand',    risk:'HIGH',  city:'Border belt',          pattern:'Forced scamming / passport confiscation',    last:'2025-07-10'},
    {country:'Cambodia',    risk:'HIGH',  city:'Sihanoukville',        pattern:'Compelled online scams / document seizure',  last:'2025-06-30'},

    {country:'China',       risk:'MED',   city:'Coastal clusters',     pattern:'Online fraud hubs shifting locations',       last:'2025-07-18'},
    {country:'Indonesia',   risk:'MED',   city:'Batam',                pattern:'Cross-border cyberfraud crews',              last:'2025-07-02'},
    {country:'Malaysia',    risk:'MED',   city:'Johor Bahru',          pattern:'Call-center style scam workshops',           last:'2025-07-05'},
    {country:'Philippines', risk:'MED',   city:'Clark area',           pattern:'Recruitment scams targeting foreigners',     last:'2025-06-12'},
    {country:'Vietnam',     risk:'MED',   city:'Ho Chi Minh City',     pattern:'Tech-support vacancy lures',                 last:'2025-06-28'},

    {country:'Bangladesh',  risk:'LOW',   city:'—',                    pattern:'Monitoring potential recruitment hubs',      last:'2025-07-12'},
    {country:'Sri Lanka',   risk:'LOW',   city:'—',                    pattern:'Monitoring potential recruitment hubs',      last:'2025-07-15'},
    {country:'UAE',         risk:'LOW',   city:'Dubai',                pattern:'Sham job offers leading to debt bondage',    last:'2025-05-02'}
  ];

  // 3. 위키백과 검색으로 점수를 계산합니다. 자체 JSON이나 서버는 사용하지 않습니다.
  //    Wikipedia API 예시:
  //    https://en.wikipedia.org/w/api.php?action=query&list=search&format=json&origin=*&srenablerewrites=1&srwhat=text&srprop=timestamp&srinfo=totalhits&srlimit=20&srsearch=("<terms>") country
  const COUNTRIES = [
    {name:'Laos',        alt:'Lao PDR'},
    {name:'Myanmar',     alt:'Burma'},
    {name:'Thailand'},
    {name:'Cambodia'},
    {name:'China'},
    {name:'Indonesia'},
    {name:'Malaysia'},
    {name:'Philippines'},
    {name:'Vietnam',     alt:'Viet Nam'},
    {name:'Bangladesh'},
    {name:'Sri Lanka'},
    {name:'United Arab Emirates', alt:'UAE'}
  ];
  const TERMS = `"scam compound" OR "cyber scam" OR "forced scamming" OR "fraud compound"`;
  const API = 'https://en.wikipedia.org/w/api.php';

  // 4. 점수화 규칙입니다. 최근성 + 언급 강도를 단순 결합합니다.
  //    totalHits가 크거나, 최근 45~120일 내 결과가 있으면 등급을 올립니다.
  function classify(totalHits, days){
    const hits = Number(totalHits||0);
    const d = isFinite(days)? days : 9999;
    const recentBoost = d<=30 ? 60 : d<=60 ? 40 : d<=120 ? 25 : 0;
    const score = Math.min(hits, 200) + recentBoost;
    if(score >= 100) return 'HIGH';
    if(score >= 30)  return 'MED';
    return 'LOW';
  }

  async function fetchWiki(country){
    const qCountry = country.alt ? `(${country.name} OR "${country.alt}")` : country.name;
    const query = `(${TERMS}) ${qCountry}`;
    const url = `${API}?action=query&list=search&format=json&origin=*&srenablerewrites=1&srwhat=text&srprop=timestamp&srinfo=totalhits&srlimit=20&srsearch=${encodeURIComponent(query)}`;
    const res = await fetch(url, {cache:'no-store'});
    if(!res.ok) throw new Error('HTTP '+res.status);
    const data = await res.json();
    const hits = data?.query?.searchinfo?.totalhits || 0;
    const items = data?.query?.search || [];
    const mostRecent = items.reduce((max, it)=>{
      const t = Date.parse(it.timestamp || 0);
      return isNaN(t) ? max : Math.max(max, t);
    }, 0);
    const days = mostRecent ? Math.round((Date.now() - mostRecent) / (1000*60*60*24)) : Infinity;
    return {name: country.name.includes('United Arab Emirates') ? 'UAE' : country.name, risk: classify(hits, days), hits, days};
  }

  function render(items){
    if(!items.length){ line.textContent = 'No data'; return; }
    const parts = items.map(x=>{
      const W = word(x.risk);
      const tip = `Signal: Wikipedia search · Hits: ${x.hits ?? '—'} · Most recent: ${isFinite(x.days)? x.days+'d ago' : 'n/a'}`;
      return `<span class="country" title="${esc(tip)}">${esc(x.name)}</span> <span class="${W.cls}">${W.w}</span>`;
    });
    const html = parts.join(', ');
    if(line.innerHTML !== html){
      line.innerHTML = html;
      line.parentElement.classList.add('pulse');
      setTimeout(()=> line.parentElement.classList.remove('pulse'), 260);
    }
  }

  function renderBaseline(){
    const parts = BASELINE.map(x=>{
      const W = word(x.risk);
      const tip = [x.city?`City: ${x.city}`:'', x.pattern?`Pattern: ${x.pattern}`:'', x.last?`Last: ${new Date(x.last).toISOString().slice(0,10)}`:''].filter(Boolean).join(' · ');
      return `<span class="country" title="${esc(tip)}">${esc(x.country)}</span> <span class="${W.cls}">${W.w}</span>`;
    });
    line.innerHTML = parts.join(', ');
  }

  // 초기 표시는 질문에서 지정한 기본값입니다.
  renderBaseline();
  status.textContent = '기본값 표시 중';

  // 버튼 클릭 시에만 위키백과 신호로 재산정합니다.
  async function refreshLive(){
    try{
      status.textContent = '위키백과 신호 수집 중…';
      btn.disabled = true;
      const results = await Promise.allSettled(COUNTRIES.map(fetchWiki));
      const ok = results.filter(r=>r.status==='fulfilled').map(r=>r.value);
      if(ok.length){
        render(ok.sort((a,b)=>{
          const rank = {HIGH:3, MED:2, LOW:1};
          return rank[b.risk]-rank[a.risk] || a.name.localeCompare(b.name);
        }));
        status.textContent = '실시간 반영됨';
      }else{
        status.textContent = '데이터가 없어 기본값 유지';
      }
    }catch(e){
      status.textContent = '조회 실패로 기본값 유지';
    }finally{
      btn.disabled = false;
      setTimeout(()=>{ status.textContent=''; }, 4000);
    }
  }

  btn?.addEventListener('click', refreshLive);
})();
</script>




<!-- === Real‑time Scam‑Compound Risk (serverless‑ready) ===
Paste this block near the end of your HTML (just before </body>)
If you are opening the file directly (file://), put your JSON inside the <script id="scam-json"> tag below.
If you are serving over http(s), you may delete the inline JSON and keep scam_feed.json next to index.html. -->

<section id="scam-panel" aria-label="Real-time Scam-Compound Risk" style="max-width:980px;margin:18px auto;padding:14px;border-radius:14px;border:1px solid rgba(0,0,0,.08);background:rgba(232,255,241,.58);backdrop-filter:saturate(1.05) blur(6px);-webkit-backdrop-filter:saturate(1.05) blur(6px);box-shadow:0 10px 26px rgba(2,6,23,.06);">
  <h3 style="margin:0 0 4px;font-size:1rem;font-weight:700;color:#111">
    Real‑time Scam‑Compound Risk <span style="font-weight:600;color:#6b7280">(auto‑refresh when online)</span>
  </h3>
  <p style="margin:0 0 8px;font-size:.84rem;color:#6b7280">
    A concise indicator summarizing public reports of coerced online‑fraud compounds by country; not a verification or legal finding.
  </p>
  <div role="status" aria-live="polite" style="text-align:center;font-size:.86rem;color:#111;letter-spacing:.08px;margin:6px 0 2px">
    <span style="font-weight:700;margin-right:6px">Scam‑Compound Index:</span>
    <span id="scam-line">Loading…</span>
  </div>
</section>

<style>
  #scam-panel .country{color:#111;font-weight:600}
  #scam-panel .risk-high{color:#ef4444;font-weight:700}
  #scam-panel .risk-med{color:#f59e0b;font-weight:700}
  #scam-panel .risk-low{color:#10b981;font-weight:700}
  #scam-panel .pulse{animation:pulse-bg .26s linear 1}
  @keyframes pulse-bg{from{background-color:rgba(255,255,0,.12)}to{background-color:transparent}}
</style>

<!-- Inline JSON for serverless use (safe to replace with your scam_feed.json content). -->
<script id="scam-json" type="application/json">
{
  "source": "Inline feed (you can replace this with your own)",
  "last_updated": "2025-08-11T00:00:00+09:00",
  "items": [
    {"country":"Cambodia","city":"Sihanoukville (various sites)","pattern":"Compelled online scams / document seizure","last":"2025-06-30","risk":"MED"},
    {"country":"Laos","city":"Golden Triangle SEZ","pattern":"Coerced cyberfraud / movement restriction","last":"2025-07-20","risk":"HIGH"},
    {"country":"Myanmar","city":"Myawaddy SEZ","pattern":"Human trafficking / fenced compounds / armed guards","last":"2025-07-29","risk":"HIGH"},
    {"country":"Philippines","city":"Clark area (reports vary)","pattern":"Recruitment scams targeting foreign workers","last":"2025-06-12","risk":"MED"},
    {"country":"Thailand","city":"Sakon Nakhon (border belt)","pattern":"Forced scamming / passport confiscation / confinement","last":"2025-07-10","risk":"HIGH"},
    {"country":"UAE","city":"Dubai (front-office recruitment)","pattern":"Sham job offers leading to debt bondage","last":"2025-05-02","risk":"LOW"},
    {"country":"Malaysia","city":"Johor Bahru (industrial zones)","pattern":"Call-center style scam workshops reported","last":"2025-07-05","risk":"MED"},
    {"country":"Vietnam","city":"Ho Chi Minh City (suburban parks)","pattern":"Luring via tech-support vacancies; passport withholding","last":"2025-06-28","risk":"MED"},
    {"country":"Indonesia","city":"Batam (free-trade zone)","pattern":"Cross-border cyberfraud crews recruiting foreigners","last":"2025-07-02","risk":"MED"},
    {"country":"China","city":"Fujian (coastal clusters)","pattern":"Online romance-fraud hubs shifting locations","last":"2025-07-18","risk":"MED"}
  ]
}
</script>

  <!-- Copyright holder: https://mcorpai.org/ Gyu-min Jeon (also known as Morgan J.) -->

<script>
(function(){
  const line = document.getElementById('scam-line');
  if(!line) return;

  const REFRESH_MS = 10*60*1000; // 10 minutes when online
  const order = {HIGH:3, MED:2, LOW:1};
  const esc = s => String(s||'').replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[c]));
  function word(r){ r=String(r||'MED').toUpperCase(); return r==='HIGH'?{w:'High',cls:'risk-high'}:r==='LOW'?{w:'Low',cls:'risk-low'}:{w:'Medium',cls:'risk-med'}; }

  // Optional two extra monitoring countries requested by user
  const SUGGEST = [
    {country:'Sri Lanka', risk:'LOW', city:'—', pattern:'Monitoring potential recruitment hubs', last:'2025-07-15'},
    {country:'Bangladesh', risk:'LOW', city:'—', pattern:'Monitoring potential recruitment hubs', last:'2025-07-12'}
  ];

  function normalize(feed){
    const map = new Map();
    (feed.items||[]).forEach(x=>{
      const c = String(x.country||'').trim(); if(!c) return;
      const r = String(x.risk||'MED').toUpperCase();
      const last = new Date(x.last||0).getTime()||0;
      const prev = map.get(c);
      if(!prev || order[r] > order[prev.r] || (order[r]===order[prev.r] && last > prev.last)){
        map.set(c, {c, r, last, city:x.city||'', pattern:x.pattern||''});
      }
    });
    SUGGEST.forEach(s=>{ if(!map.has(s.country)){ map.set(s.country, {c:s.country, r:String(s.risk||'LOW').toUpperCase(), last:new Date(s.last||0).getTime()||0, city:s.city||'', pattern:s.pattern||''}); } });
    const arr = Array.from(map.values());
    arr.sort((a,b)=> order[b.r]-order[a.r] || a.c.localeCompare(b.c));
    return arr;
  }

  function render(items){
    if(!items.length){ line.textContent='No data'; return; }
    const parts = items.map(x=>{
      const W = word(x.r);
      const tip = [x.city?`City: ${x.city}`:'', x.pattern?`Pattern: ${x.pattern}`:'', x.last?`Last: ${new Date(x.last).toISOString().slice(0,10)}`:''].filter(Boolean).join(' · ');
      return `<span class="country" title="${esc(tip)}">${esc(x.c)}</span> <span class="${W.cls}">${W.w}</span>`;
    });
    const html = parts.join(', ');
    if(line.innerHTML !== html){
      line.innerHTML = html; line.parentElement.classList.add('pulse'); setTimeout(()=>line.parentElement.classList.remove('pulse'), 260);
    }
  }

  async function loadFromJsonFile(){
    try{
      const res = await fetch('scam_feed.json?ts='+Date.now(), {cache:'no-store'});
      if(!res.ok) throw 0; const data = await res.json(); return data;
    }catch(e){ return null; }
  }

  async function load(){
    // Priority 1: inline JSON for file:// usage
    const inlineTag = document.getElementById('scam-json');
    if(inlineTag && inlineTag.textContent.trim().length){
      try{ const data = JSON.parse(inlineTag.textContent); render(normalize(data)); return; }catch(_){ /* fall through */ }
    }
    // Priority 2: fetch external JSON when served over http(s)
    if(location.protocol === 'http:' || location.protocol === 'https:'){
      const data = await loadFromJsonFile(); if(data){ render(normalize(data)); return; }
    }
    line.textContent = 'Failed to load data';
  }

  load();
  if(location.protocol === 'http:' || location.protocol === 'https:'){
    const iv = setInterval(()=>{ if(!document.hidden) load(); }, REFRESH_MS);
    window.addEventListener('pagehide', ()=>clearInterval(iv), {once:true});
  }
})();
</script>


  



  
