<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>M‑Corp AI — Ethical AI for Refugee Self‑Reliance</title>
  <meta name="description" content="Rights‑based, offline AI for children with disabilities. A refugee‑led self‑reliance model with two in‑browser calculators for impact and livelihoods." />
  <meta name="theme-color" content="#0b77d5" />
  <meta property="og:title" content="M‑Corp AI — Ethical AI for Refugee Self‑Reliance" />
  <meta property="og:description" content="Rights‑based, offline AI for children with disabilities. Refugee‑led manufacturing and self‑reliance." />
  <meta property="og:type" content="website" />

  <style>
    /* ===== CSS variables ===== */
    :root{
      --bg: #f5f7fb;
      --paper: #ffffff;
      --ink: #10243a;
      --muted: #52667a;
      --line: #d7e2ee;
      --accent: #0b77d5;
      --accent-weak: #eaf4ff;
      --ok: #22c55e;
      --bad: #ef4444;
      --soft-shadow: 0 10px 28px rgba(16,36,58,.07);
      --radius: 16px;
    }

    /* ===== Global ===== */
    html,body{height:100%}
    html{scroll-behavior:smooth}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#fff 65%);color:var(--ink);font:16px/1.65 system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif}
    a{color:var(--accent)}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    .card{background:var(--paper);border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--soft-shadow);padding:24px}
    .btn{display:inline-block;border-radius:12px;border:1px solid var(--line);padding:10px 14px;background:#fff;color:var(--ink);cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff;border-color:#0b69bb}
    .grid{display:grid;gap:12px}
    .cols-2{grid-template-columns:1.1fr 1fr}
    .cols-3{grid-template-columns:repeat(3,1fr)}
    @media (max-width:960px){.cols-2,.cols-3{grid-template-columns:1fr}}
    .sr-only{position:absolute;left:-9999px}

    /* ===== Header / hero ===== */
    header.hero{padding:28px 0}
    header .title{font-size:1.9rem;margin:0}
    header .subtitle{margin:6px 0 0 0;color:var(--muted)}

    /* ===== Diplomatic boxes ===== */
    .diplom-wrap{max-width:1080px;margin:10px auto 18px;padding:0 24px}
    .diplom{padding:18px;border-radius:14px;border:1px solid var(--line);box-shadow:var(--soft-shadow)}
    .diplom.blue{background:var(--accent-weak);border-color:#cfe3ff}
    .diplom.red{background:rgba(255,200,200,.28);border-color:#f5cccc}

    /* ===== Section headings ===== */
    section{margin:22px 0}
    h2{font-size:1.25rem;margin:0 0 8px}
    .meta{font-size:.9rem;color:var(--muted)}
    .hr{height:1px;background:#edf1f6;margin:16px 0}

    /* ===== Report typography ===== */
    .report p{margin:10px 0}
    .report ul{margin:8px 0 14px 20px}

    /* ===== Calculator cards (dark-on-dark contained) ===== */
    .panel-dark{--bg:#0f172a;--fg:#e2e8f0;--soft:#0b1220;--line:#334155;--muted:#94a3b8}
    .panel-dark{background:var(--bg);color:var(--fg);border-radius:18px;border:1px solid var(--line);box-shadow:0 12px 28px rgba(2,6,23,.25);padding:22px}
    .panel-dark .card{background:var(--soft);border-color:var(--line);color:var(--fg)}
    .panel-dark label{display:block;font-size:.9rem;color:var(--muted);margin-bottom:4px}
    .panel-dark input, .panel-dark select, .panel-dark textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--line);background:var(--soft);color:var(--fg);outline:none}
    .kpis{display:grid;gap:10px}
    @media(min-width:900px){.kpis{grid-template-columns:repeat(3,1fr)}}
    .kpi .title{font-size:.9rem;color:var(--muted)}
    .kpi .num{font-weight:800;font-size:1.25rem}
    canvas.chart{width:100%;height:180px;border-radius:10px;background:var(--soft)}

    /* ===== Footer ===== */
    footer{margin:26px 0 12px;color:#1d4ed8}
    footer .small{font-size:.92rem}

    /* Print helpers */
    @media print{
      nav, .no-print{display:none !important}
      body{background:#fff}
      .card, .panel-dark{box-shadow:none;border-color:#ddd}
    }
  </style>
</head>
<body>
  <a href="#content" class="sr-only">Skip to content</a>
  <nav class="container no-print" aria-label="Site">
    <div class="card" style="display:flex;gap:16px;align-items:center;justify-content:space-between">
      <strong>M‑Corp AI</strong>
      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <a href="#summary">Executive Summary</a>
        <a href="#tech">Technical Approach</a>
        <a href="#calc">Refugee Calculator</a>
        <a href="#sim">Impact Simulator</a>
        <a href="#contact">Contact</a>
      </div>
    </div>
  </nav>

  <header class="container hero">
    <div class="card">
      <h1 class="title">Not for Profit. Not for Data. Built for Dignity</h1>
      <p class="subtitle">Rights‑based wearable AI for children with disabilities, manufactured and maintained by refugees to build self‑reliance within camps.</p>
      <p class="meta">Prepared by: Gyu‑min Jeon (Republic of Korea) · Initiated 2020 — Finalized 2025</p>
    </div>
  </header>

  <!-- Diplomatic notes -->
  <div class="diplom-wrap">
    <section class="diplom blue" aria-label="Diplomatic request">
      <p><strong>Your Excellency,</strong> I would be grateful if you could spare a brief moment to review a concise presentation on supporting children with disabilities and pathways to refugee self‑reliance. With your kind permission, I would be honored to deliver a brief, five‑minute overview. This initiative has reached preliminary consideration at GIZ (Germany) and is under future review at SIDA (Sweden), underscoring its alignment with global priorities in ethical technology and inclusive development. A world‑first humanitarian AI model, designed not to compete with Big Tech, but to protect children with disabilities and empower refugees — capable of being proven scalable in the field with only USD 1,000.</p>
    </section>
  </div>
  <div class="diplom-wrap">
    <section class="diplom red" aria-label="Japanese/French note">
      <p>🇯🇵 倫理的AIは、日本の人道支援の強みである「海外現地での支援」と「技術協力」を融合し、難民が自ら生活を支えられる仕組みを構築します。倫理的AIによる自立支援は、日本のODAと国際協力方針に完全に合致する革新的モデルです。 🇫🇷 Aucun pays n’a encore pris l’ascendant dans le domaine de l’IA éthique.</p>
    </section>
  </div>

  <main id="content" class="container">
    <!-- Executive Summary / Report -->
    <section id="summary" class="card report" aria-labelledby="reportTitle">
      <h2 id="reportTitle">AI Necklace for Child Safety — A Refugee Self‑Reliance Model for Children with Disabilities</h2>
      <p class="meta">(The world’s first concept of ethical AI in humanitarian protection)</p>
      <div class="hr"></div>

      <h3>1) Purpose and Core Concept</h3>
      <p>The <em>AI Necklace for Child Safety</em> is a life‑saving, offline, data‑free wearable designed for children with developmental and physical disabilities in low‑resource and displacement contexts. It places <strong>ethical AI</strong> at the center: human dignity first, zero personal data collection, and no cloud dependence. Refugee‑led assembly embeds livelihoods directly in camps.</p>

      <h3>2) Humanitarian Need</h3>
      <p>Children with disabilities face heightened risks: wandering, traffic, and crises where they cannot call for help. A practical, low‑cost MVP can be demonstrated with ~<strong>USD 1,000</strong>, funded by the proposer.</p>

      <h3>3) Technical Approach (offline‑first)</h3>
      <ul>
        <li><strong>Form factor:</strong> lightweight necklace with integrated sensors.</li>
        <li><strong>On‑device inference:</strong> real‑time prompts for sudden movement, road proximity, abnormal vitals.</li>
        <li><strong>Assembly:</strong> a few modern chips and simple circuitry; teachable in under two hours inside a tent.</li>
      </ul>

      <h3>4) Strategic Alignment</h3>
      <ul>
        <li>Directly supports SDGs 3, 4, 9, 10, 11, and 17.</li>
        <li>Shifts refugees from recipients to producers; complements SSE frameworks.</li>
      </ul>

      <h3>5) Ethics & Compliance</h3>
      <ul>
        <li>Privacy: GDPR/COPPA‑aligned; zero personal data collected.</li>
        <li>Design: inclusive, human‑centric, safety‑first.</li>
      </ul>

      <h3>6) Partnerships & Next Steps</h3>
      <ul>
        <li>Pilot in a selected settlement to validate technical + social feasibility.</li>
        <li>Integrate with national disability protection and humanitarian plans.</li>
        <li>Train refugee teams for assembly, maintenance, and distribution.</li>
      </ul>

      <p><strong>Docs:</strong> 12‑page executive summary available: <a href="https://drive.google.com/file/d/1tY-QZBgBoGggzbkF4o7mWlAeXEgx4dKZ/view" target="_blank" rel="noopener">AINecklace_Summary_Korea.pdf</a>. A 260‑page dossier is available upon request.</p>
    </section>

    <!-- Technical detail anchor (optional break-out) -->
    <section id="tech" class="card">
      <h2>Technical Approach (deeper dive)</h2>
      <ul>
        <li>Edge AI inference; no network required; multilingual, child‑friendly prompts.</li>
        <li>Low‑power components; rechargeable and replaceable modules.</li>
        <li>Manufacturing in micro “tent factories” with quality checklists and jigs.</li>
      </ul>
    </section>

    <!-- Refugee Calculator (educational) -->
    <section id="calc" class="panel-dark" aria-labelledby="calcTitle">
      <h2 id="calcTitle">Refugee Calculator</h2>
      <p class="meta">Educational estimates calibrated to public assessments; runs fully in your browser. Baseline ΔT = 1.55 °C.</p>

      <div class="card" role="region" aria-live="polite" style="display:flex;gap:12px;flex-wrap:wrap;align-items:center">
        <span aria-hidden="true" style="display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;font-size:.85rem;background:#0b3869;color:#fff;border:1px solid #153e6a">ΔT</span>
        <button type="button" class="btn" id="rcDown" aria-label="Decrease temperature">−</button>
        <strong id="rcTemp" style="font-size:1.05rem">1.55</strong><span>°C</span>
        <button type="button" class="btn" id="rcUp" aria-label="Increase temperature">+</button>

        <label for="rcCropSel" style="margin-left:6px">Crop</label>
        <select id="rcCropSel">
          <option value="wheat" selected>Wheat</option>
          <option value="rice">Rice</option>
          <option value="maize">Maize</option>
        </select>

        <span id="rcReadout">Every 0.1 °C may correspond to <strong id="rcRefugeesStep">0–0</strong> people/year additionally displaced (vs 1.55 °C). Cumulative: <strong id="rcRefugeesCum">0–0</strong>. <span id="rcCropName">Wheat</span> yield change: <strong id="rcCrop">0.00%</strong>.</span>
      </div>

      <div id="rcWarn" class="card" style="display:none;border-style:dashed"></div>
      <div id="rcApoc" class="card" style="display:none;border-color:#f2c0c0;color:#fecaca;background:#2a0f12"></div>

      <div class="card">
        <div class="meta">Projected displacement at current temperature (illustrative)</div>
        <div style="display:flex;gap:16px;flex-wrap:wrap">
          <div>After 1 year: <strong id="rcYear1">0–0</strong></div>
          <div>After 2 years: <strong id="rcYear2">0–0</strong></div>
          <div>After 3 years: <strong id="rcYear3">0–0</strong></div>
        </div>
      </div>

      <small>Notes: uses non‑linear acceleration with bands; follows the spirit of Copernicus/WMO public analyses. Figures are didactic, not forecasts.</small>
    </section>

    <!-- Impact Simulator ("$1,000 tent factory") -->
    <section id="sim" class="panel-dark" aria-labelledby="simTitle">
      <h2 id="simTitle">Impact Simulator — “$1,000 Tent Factory”</h2>
      <p class="meta">Zero‑data; runs locally. Adjust inputs to match local reality.</p>

      <div class="grid cols-2">
        <div>
          <div class="grid cols-3">
            <div><label>Tents</label><input id="tents" type="number" min="1" value="1"></div>
            <div><label>Workers per tent</label><input id="workersPerTent" type="number" min="1" value="4"></div>
            <div><label>Duration (months)</label><input id="months" type="number" min="1" value="6"></div>
          </div>
          <div class="grid cols-3" style="margin-top:10px">
            <div><label>Units/worker/week</label><input id="unitsPerWorkerWeek" type="number" min="1" value="3"></div>
            <div><label>Premium share (%)</label><input id="premiumShare" type="range" min="0" max="100" value="25" oninput="MC.syncShare(this.value)"></div>
            <div><label>Camp population</label><input id="campPop" type="number" min="1" value="5000"></div>
          </div>
          <div class="grid cols-3" style="margin-top:10px">
            <div><label>Microloan per tent (USD)</label><input id="loanPerTent" type="number" min="0" value="1000"></div>
            <div><label>Payout ratio (%)</label><input id="payoutRatio" type="number" min="0" max="100" value="50"></div>
            <div><label>Dividend/household (USD)</label><input id="dividendUnit" type="number" min="1" value="50"></div>
          </div>
        </div>
        <div class="kpis">
          <div class="card kpi"><div class="title">Total workers</div><div id="out_workers" class="num">—</div></div>
          <div class="card kpi"><div class="title">Total units</div><div id="out_units" class="num">—</div></div>
          <div class="card kpi"><div class="title">Revenue</div><div id="out_revenue" class="num">$0</div></div>
          <div class="card kpi"><div class="title">Wage pool (coverage vs 10%)</div><div class="num" id="out_wagePool">$0</div><div class="title">Coverage: <span id="out_wageCoverage">—</span></div></div>
          <div class="card kpi"><div class="title">Dividend pool → households</div><div id="out_divPool" class="num">$0</div><div class="title">Households: <span id="out_divHouseholds">—</span></div></div>
          <div class="card kpi"><div class="title">Reinvestment / weeks to repay loan</div><div id="out_margin" class="num">$0</div><div class="title">ETA: <span id="out_weeksToRepay">—</span> weeks</div></div>
          <div class="card kpi"><div class="title">GDP per capita</div><div class="num">Monthly: <span id="out_gdpPerCapMonthly">$0</span> · Annual: <span id="out_gdpPerCapAnnual">$0</span></div></div>
          <div class="card kpi"><div class="title">Avg. per participating worker (monthly)</div><div id="out_avgPerWorker" class="num">$0</div></div>
        </div>
      </div>

      <div class="card" style="margin-top:12px">
        <div class="title">Product mix & costs</div>
        <div class="grid cols-3" style="margin-top:10px">
          <div><label>Budget price (USD)</label><input id="priceBudget" type="number" min="1" value="20"></div>
          <div><label>Budget BOM+other (USD)</label><input id="costBudget" type="number" min="0" value="12"></div>
          <div><label>Budget share (%)</label><input id="budgetShare" type="number" readonly value="75"></div>
        </div>
        <div class="grid cols-3" style="margin-top:10px">
          <div><label>Premium price (USD)</label><input id="pricePremium" type="number" min="1" value="200"></div>
          <div><label>Premium BOM+other (USD)</label><input id="costPremium" type="number" min="0" value="120"></div>
          <div><label>Premium share (%)</label><input id="premiumShareNum" type="number" readonly value="25"></div>
        </div>
        <div class="grid cols-3" style="margin-top:10px">
          <div><label>Monthly wage per worker (USD)</label><input id="monthlyWage" type="number" min="0" value="300"></div>
          <div><label>Wage target rate of sales (%)</label><input id="wageTargetRate" type="number" min="0" max="100" value="10"></div>
          <div><label>Weeks per month (for conversion)</label><input id="weeksPerMonth" type="number" min="1" step="0.1" value="4"></div>
        </div>
      </div>

      <div class="card" style="margin-top:12px">
        <div class="title">Cumulative financials</div>
        <canvas id="chart" class="chart" width="640" height="180" aria-label="financial chart"></canvas>
        <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn" id="copySummary">Copy summary</button>
        </div>
      </div>
    </section>

    <!-- Contact / diplomatic notice -->
    <section id="contact" class="card">
      <h2>Diplomatic Notice</h2>


      
      
      
<p>
  We are ready to provide the Refugee‑Camp Self‑Reliance PDF dossier at any time; please send a written request by email.
</p>

<p style="color: #0b77d5; font-size: 1.1em; font-weight: bold;">
  Additional resources
</p>
<p>
  <a href="https://mcorp-ai.com" target="_blank" rel="noopener">mcorp-ai.com</a> — detailed initiative materials<br>
  <a href="https://mcorp.ai.kr" target="_blank" rel="noopener">mcorp.ai.kr</a> — Korean‑language edition
</p>

<p style="color: #0b77d5; font-size: 1.1em; font-weight: bold;">
  Planned next steps
</p>
<p>
  (A) <a href="https://mcorp-ai.com" target="_blank" rel="noopener">mcorp-ai.com</a> — interest‑free microloans of approximately USD 1,000 per tent for refugees who voluntarily join localized AI assembly.<br>
  (B) <a href="https://mcorpai.org" target="_blank" rel="noopener">mcorpai.org</a> — public‑interest hub for the offline, data‑minimizing AI Safety Necklace, including technical documentation, ethics principles, and future ordering.<br>
  (C) <a href="https://mcorp.ai.kr" target="_blank" rel="noopener">mcorp.ai.kr</a> — Korean‑language portal for domestic investors, ESG‑oriented companies, and civic participation.
</p>

<p style="color: #0b77d5; font-size: 1.1em; font-weight: bold;">
  E‑mail
</p>
<p>
  <a href="mailto:gyumin.jeon.childsafe@gmail.com">gyumin.jeon.childsafe@gmail.com</a> · Backup: <a href="mailto:jekymin2@naver.com">jekymin2@naver.com</a>
</p>






      
      <p class="meta">“Self‑reliance” here means sustainable livelihoods <em>inside</em> camps — not external migration.</p>
    </section>
  </main>

  <footer class="container">
    <p class="small">This public‑interest site contains original work by the undersigned. Among other outputs, a 100‑page plan outlining how a ~$20 smartphone can help communities in electricity‑ and network‑scarce regions find food and water and reduce the risk of mass violence is available upon request.</p>
  </footer>

  <noscript class="container">This page includes interactive calculators that require JavaScript (all computation runs locally in your browser).</noscript>

  <script>
  // ===================== Refugee Calculator (educational) =====================
  (function(){
    const STEP = 0.1;               // °C per click
    const BASELINE = 1.55;          // observed 2023–24 state
    const MAX_T = 3.5;              // UI cap
    const CROP_COEFF = { wheat:-0.6, rice:-0.32, maize:-0.74 }; // % per +0.1°C vs baseline

    const LOW_BASE_PER_STEP = 15000;      // people/0.1°C at baseline
    const HIGH_BASE_PER_STEP = 60000;
    const LOW_GROWTH_PER_DEG  = Math.log(2)/1.0;   // ×2 per +1.0°C
    const HIGH_GROWTH_PER_DEG = Math.log(2)/0.5;   // ×2 per +0.5°C

    const dangerNotes = [
      {t:1.5, msg:'~1.5 °C: Heatwaves intensify in South Asia/Middle East; heavy rain & floods rise; coral reefs decline.'},
      {t:1.7, msg:'~1.7 °C: Sahel/Horn of Africa face drought–flood swings; wildfire seasons intensify around Mediterranean/Western N. America.'},
      {t:2.0, msg:'~2.0 °C: Once‑in‑10‑year heat extremes far more frequent; Arctic summer sea‑ice‑free conditions more likely ~once/decade.'},
      {t:2.5, msg:'~2.5 °C: Multiple breadbaskets risk concurrent yield shocks; humanitarian needs can spike.'},
      {t:3.0, msg:'~3.0 °C: Severe, pervasive risks to food, water, and habitability; larger displacement pressures may emerge.'}
    ];

    const $ = (id) => document.getElementById(id);
    const round1 = (n) => (Math.round(n*10)/10).toFixed(1);
    const fmt = (n) => Math.round(n).toLocaleString();

    let T = BASELINE; let crop = 'wheat'; let animTimer = null;

    function stepIncrement(temp, bound){
      const growth = bound==='low' ? LOW_GROWTH_PER_DEG : HIGH_GROWTH_PER_DEG;
      const base   = bound==='low' ? LOW_BASE_PER_STEP : HIGH_BASE_PER_STEP;
      const mult   = Math.exp(growth * Math.max(0, temp - BASELINE));
      return base * mult;
    }
    function cumulativeDisplacement(temp, bound){
      if(temp <= BASELINE) return 0;
      const steps = Math.round((temp - BASELINE)/STEP);
      let sum = 0;
      for(let i=1;i<=steps;i++) sum += stepIncrement(BASELINE + i*STEP, bound);
      return sum;
    }
    function yearlyGrowthRates(T){
      const d = Math.max(0, T - BASELINE);
      return { gLow: 0.05 + 0.15*d, gHigh: 0.10 + 0.35*d };
    }
    function refreshWarnings(temp){
      const apoc = $('rcApoc'); const warn = $('rcWarn');
      apoc.style.display='none'; warn.style.display='none';
      if(temp >= 3.1){ apoc.textContent = '≥3.1 °C scenario is outside this tool’s range.'; apoc.style.display='block'; return; }
      const note = dangerNotes.filter(d=>temp >= d.t).pop();
      if(note){ warn.textContent = note.msg; warn.style.display='block'; }
    }
    function animateYears(baseLow, baseHigh){
      if(animTimer) clearInterval(animTimer);
      const { gLow, gHigh } = yearlyGrowthRates(T);
      const target1Low = baseLow, target1High = baseHigh;
      const target2Low = baseLow * (1 + (1+gLow));
      const target3Low = baseLow * (1 + (1+gLow) + Math.pow(1+gLow,2));
      const target2High = baseHigh * (1 + (1+gHigh));
      const target3High = baseHigh * (1 + (1+gHigh) + Math.pow(1+gHigh,2));
      const dur=1200, dt=200, steps=Math.ceil(dur/dt); let k=0;
      animTimer = setInterval(()=>{
        k++; const p=k/steps; const lerp=(a,b)=>a+(b-a)*p;
        $('rcYear1').textContent = `${fmt(lerp(0, target1Low))}–${fmt(lerp(0, target1High))}`;
        $('rcYear2').textContent = `${fmt(lerp(0, target2Low))}–${fmt(lerp(0, target2High))}`;
        $('rcYear3').textContent = `${fmt(lerp(0, target3Low))}–${fmt(lerp(0, target3High))}`;
        if(k>=steps) clearInterval(animTimer);
      }, dt);
    }
    function update(){
      $('rcTemp').textContent = round1(T);
      $('rcCropName').textContent = crop[0].toUpperCase()+crop.slice(1);
      const lowStep = stepIncrement(T+1e-9, 'low');
      const highStep = stepIncrement(T+1e-9, 'high');
      const lowCum = cumulativeDisplacement(T, 'low');
      const highCum = cumulativeDisplacement(T, 'high');
      const cropChange = ((T - BASELINE)/STEP) * CROP_COEFF[crop];
      $('rcRefugeesStep').textContent = `${fmt(lowStep)}–${fmt(highStep)}`;
      $('rcRefugeesCum').textContent = `${fmt(lowCum)}–${fmt(highCum)}`;
      $('rcCrop').textContent = (Math.round(cropChange*100)/100).toFixed(2) + '%';
      refreshWarnings(T); animateYears(lowCum, highCum);
    }
    function inc(){ T = Math.min(MAX_T, +(T + STEP).toFixed(1)); update(); }
    function dec(){ T = Math.max(BASELINE, +(T - STEP).toFixed(1)); update(); }

    document.getElementById('rcUp').addEventListener('click', inc);
    document.getElementById('rcDown').addEventListener('click', dec);
    document.getElementById('rcCropSel').addEventListener('change', (e)=>{ crop = e.target.value; update(); });
    update();
  })();

  // ===================== Impact Simulator =====================
  (function(){
    const $ = id => document.getElementById(id);
    const fmt = (n,cur)=> cur? '$'+Math.round(n).toLocaleString(): Math.round(n).toLocaleString();

    const MC = {
      syncShare(v){ $('premiumShareNum').value = +v; $('budgetShare').value = 100 - (+v); MC.calc(); },
      calc(){
        const tents = +$('tents').value;
        const workersPerTent = +$('workersPerTent').value;
        const months = +$('months').value;
        const unitsPerWorkerWeek = +$('unitsPerWorkerWeek').value;
        const weeksPerMonth = +$('weeksPerMonth').value;
        const priceB = +$('priceBudget').value;
        const priceP = +$('pricePremium').value;
        const costB = +$('costBudget').value;
        const costP = +$('costPremium').value;
        const shareP = +$('premiumShare').value/100;
        const shareB = 1 - shareP;
        const monthlyWagePerWorker = +$('monthlyWage').value; // 300
        const wageTargetRate = +$('wageTargetRate').value/100; // 10%
        const payoutRatio = +$('payoutRatio').value/100; // 50%
        const dividendUnit = +$('dividendUnit').value; // $50 per household per month
        const loanPerTent = +$('loanPerTent').value;
        const campPop = Math.max(1,+$('campPop').value);

        const totalWorkers = tents * workersPerTent;
        const totalWeeks = months * weeksPerMonth;
        const totalUnits = totalWorkers * unitsPerWorkerWeek * totalWeeks;
        const unitsB = totalUnits * shareB; const unitsP = totalUnits * shareP;
        const revenue = unitsB*priceB + unitsP*priceP;
        const directCosts = unitsB*costB + unitsP*costP;
        const wagePool = totalWorkers * monthlyWagePerWorker * months;
        const wageTarget = revenue * wageTargetRate;
        const marginBeforePayout = revenue - directCosts - wagePool;
        const dividendPool = Math.max(0, marginBeforePayout * payoutRatio);
        const households = Math.floor(dividendPool / dividendUnit);
        const reinvest = Math.max(0, marginBeforePayout - dividendPool);
        const loanTotal = tents * loanPerTent;
        const weeklyReinvest = totalWeeks>0 ? reinvest / totalWeeks : 0;
        const weeksToRepay = weeklyReinvest>0 ? Math.ceil(loanTotal / weeklyReinvest) : '—';
        const monthlyDiv = months>0 ? dividendPool / months : 0;
        const monthlyDistrib = (wagePool / months) + monthlyDiv;
        const gdpPerCapMonthly = monthlyDistrib / campPop;
        const gdpPerCapAnnual = gdpPerCapMonthly * 12;
        const avgPerWorkerMonthly = months>0 && totalWorkers>0 ? (wagePool / months)/ totalWorkers : 0;

        $('out_workers').textContent = fmt(totalWorkers);
        $('out_units').textContent = fmt(totalUnits);
        $('out_revenue').textContent = fmt(revenue,true);
        $('out_wagePool').textContent = fmt(wagePool,true);
        $('out_wageCoverage').textContent = wageTarget>0 ? ((wagePool / wageTarget * 100).toFixed(1) + '%') : '—';
        $('out_divPool').textContent = fmt(dividendPool,true);
        $('out_divHouseholds').textContent = fmt(households);
        $('out_margin').textContent = fmt(reinvest,true);
        $('out_weeksToRepay').textContent = weeksToRepay;
        $('out_gdpPerCapMonthly').textContent = '$' + gdpPerCapMonthly.toFixed(2);
        $('out_gdpPerCapAnnual').textContent = '$' + gdpPerCapAnnual.toFixed(2);
        $('out_avgPerWorker').textContent = fmt(avgPerWorkerMonthly,true);

        // draw chart
        const c=$('chart'), ctx=c.getContext('2d');
        const W=c.width, H=c.height; ctx.clearRect(0,0,W,H);
        const data=[{l:'Revenue',v:revenue},{l:'Total cost (incl. wages)',v:directCosts + wagePool},{l:'Reinvestment',v:reinvest}];
        const max=Math.max(1,...data.map(d=>d.v));
        const pad=30, bw=(W-pad*2)/data.length-20; ctx.fillStyle='#0b1220'; ctx.fillRect(0,0,W,H);
        data.forEach((d,i)=>{ const x=pad+i*(bw+20); const h=d.v/max*(H-40); const y=H-20-h; ctx.fillStyle=['#60a5fa','#ef4444','#22c55e'][i]; ctx.fillRect(x,y,bw,h); ctx.fillStyle='#94a3b8'; ctx.font='12px system-ui'; ctx.fillText(d.l,x,H-6); ctx.fillText('$'+Math.round(d.v).toLocaleString(),x,y-6); });
      }
    };

    // wire up
    ['tents','workersPerTent','months','unitsPerWorkerWeek','weeksPerMonth','priceBudget','pricePremium','costBudget','costPremium','premiumShare','monthlyWage','wageTargetRate','payoutRatio','dividendUnit','loanPerTent','campPop']
      .forEach(id=> document.getElementById(id).addEventListener('input', ()=>MC.calc()));

    document.getElementById('copySummary').addEventListener('click', ()=>{
      const text = [
        'M‑Corp Impact Simulator summary',
        `1. Workers: ${document.getElementById('out_workers').textContent}, Units: ${document.getElementById('out_units').textContent}`,
        `2. Revenue: ${document.getElementById('out_revenue').textContent}, Wage pool: ${document.getElementById('out_wagePool').textContent} (coverage: ${document.getElementById('out_wageCoverage').textContent})`,
        `3. Dividends: ${document.getElementById('out_divPool').textContent} → households: ${document.getElementById('out_divHouseholds').textContent}`,
        `4. Reinvestment: ${document.getElementById('out_margin').textContent}, Loan repayment ETA: ${document.getElementById('out_weeksToRepay').textContent} weeks`,
        `5. GDP/capita (monthly/annual): ${document.getElementById('out_gdpPerCapMonthly').textContent} / ${document.getElementById('out_gdpPerCapAnnual').textContent}`
      ].join('\n');
      navigator.clipboard.writeText(text).then(()=>alert('Summary copied.'));
    });

    // init
    document.getElementById('premiumShareNum').value = +document.getElementById('premiumShare').value;
    document.getElementById('budgetShare').value = 100 - (+document.getElementById('premiumShare').value);
    MC.calc();
    window.MC = MC; // expose for range slider sync
  })();
  </script>
</body>
</html>
